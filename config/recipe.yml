name: ublue-custom
description: A custom UBlue image for my own personal usage
base-image: ghcr.io/ublue-os/silverblue-surface
image-version: 39

# Files ----------------------------------------------------------------------

modules:
  - type: files
    files:
      - usr: /usr

# First-party packages -------------------------------------------------------

  - type: rpm-ostree
    install:
      - adw-gtk3-theme
      - btrfs-assistant
      - nautilus-python
      - neovim
      - guake
      - podman-remote
      - seahorse-nautilus
      - steam-devices
      - sushi
      - zsh

# Third-party packages -------------------------------------------------------

  # NextDNS
  - type: rpm-ostree
    repos:
      - https://repo.nextdns.io/nextdns.repo
    install:
      - nextdns

  # gocrypts
  - type: rpm-ostree
    repos:
      - https://copr.fedorainfracloud.org/coprs/dawid/gocryptfs/repo/fedora-%OS_VERSION%/dawid-gocryptfs-fedora-%OS_VERSION%.repo
    install:
      - gocryptfs

  # showmethekey
  - type: rpm-ostree
    repos:
      - https://copr.fedorainfracloud.org/coprs/pesader/showmethekey/repo/fedora-%OS_VERSION%/pesader-showmethekey-fedora-%OS_VERSION%.repo
    install:
      - showmethekey

  # starship
  - type: rpm-ostree
    repos:
      - https://copr.fedorainfracloud.org/coprs/atim/starship/repo/fedora-%OS_VERSION%/atim-starship-fedora-%OS_VERSION%.repo
    install:
      - starship

  # yadm
  - type: rpm-ostree
    repos:
      - https://download.opensuse.org/repositories/home:TheLocehiliosan:yadm/Fedora_%OS_VERSION%/home:TheLocehiliosan:yadm.repo
    install:
      - yadm

  # firefoxpwa
  - type: script
    scripts:
      - add-firefoxpwa-repo.sh
  - type: rpm-ostree
    install:
      - firefoxpwa

  # awatcher
  - type: script
    scripts:
      - install-awatcher.sh

# Akmods ---------------------------------------------------------------------

  - type: akmods
    install:
      - v4l2loopback

# Signing policy -------------------------------------------------------------

  - type: script
    scripts:
      - signing.sh
